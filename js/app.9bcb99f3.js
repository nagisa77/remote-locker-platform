(function(){"use strict";var n={293:function(n,e,t){var o=t(5130),a=t(6768);function i(n,e){const t=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(t)}var s=t(1241);const r={},c=(0,s.A)(r,[["render",i]]);var l=c,u=t(1387),d=t(6971);const v={class:"login-container"},f={class:"login-card"},p={class:"login-card-body"};function b(n,e,t,o,i,s){return(0,a.uX)(),(0,a.CE)("div",v,[(0,a.Lk)("div",f,[e[3]||(e[3]=(0,a.Lk)("div",{class:"login-card-header"},[(0,a.eW)(" Welcome "),(0,a.Lk)("div",{class:"login-card-subheader"}," Please select the appropriate login method ")],-1)),(0,a.Lk)("div",p,[e[2]||(e[2]=(0,a.Lk)("hr",{class:"login-card-divider"},null,-1)),(0,a.Lk)("button",{onClick:e[0]||(e[0]=(...n)=>o.googleLogin&&o.googleLogin(...n)),class:"login-card-button"},e[1]||(e[1]=[(0,a.Lk)("img",{src:"https://cdn1.iconfinder.com/data/icons/google-s-logo/150/Google_Icons-09-1024.png",alt:"Google",class:"login-card-button-icon"},null,-1),(0,a.Lk)("div",{class:"login-card-button-text"}," Google 登录 ",-1)]))])])])}t(4114);var g=t(6400),m=t(4161),h=t(5942);const k={apiKey:"AIzaSyDgLBH7BXA9mPiiwX7xkDb4LN8PqxKk288",authDomain:"remotelocker-e2e68.firebaseapp.com",databaseURL:"https://remotelocker-e2e68-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"remotelocker-e2e68",storageBucket:"remotelocker-e2e68.appspot.com",messagingSenderId:"112977761793",appId:"1:112977761793:web:50136a6c361c1dc9159200",measurementId:"G-5GSEJVTEEV"},y=(0,g.Wp)(k),_=(0,d.xI)(),x=new d.HF;(0,m.C3)(y,"https://remotelocker-e2e68-default-rtdb.asia-southeast1.firebasedatabase.app"),(0,h.P5)(y);var L={name:"LoginPage",setup(){const n=(0,u.rd)(),e=async()=>{try{const e=await(0,d.df)(_,x);console.log("User logged in:",e.user),n.push("/")}catch(e){console.error("登录失败:",e)}};return{googleLogin:e}}};const C=(0,s.A)(L,[["render",b],["__scopeId","data-v-f0b1b024"]]);var w=C,E=t(4232);const I={class:"container"},X={class:"logout-button"},j={class:"device-card"},O={key:0,class:"loading-icon"},Y={key:1,class:"device-status-container"},K={class:"device-name"},A={class:"device-status-right-container"},T=["onClick"];function z(n,e,t,o,i,s){const r=(0,a.g2)("l-tail-chase");return(0,a.uX)(),(0,a.CE)("div",I,[(0,a.Lk)("div",X,[(0,a.Lk)("button",{onClick:e[0]||(e[0]=(...n)=>o.logout&&o.logout(...n))},"Logout")]),e[1]||(e[1]=(0,a.Lk)("h1",null,"My devices",-1)),(0,a.Lk)("div",j,[o.loading?((0,a.uX)(),(0,a.CE)("div",O,[(0,a.bF)(r,{size:"40",speed:"1.75",color:"black"})])):((0,a.uX)(),(0,a.CE)("div",Y,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.devices,((n,e)=>((0,a.uX)(),(0,a.CE)("div",{key:e,class:"device-status-item"},[(0,a.Lk)("div",K,(0,E.v_)(e),1),(0,a.Lk)("div",A,[1===n?((0,a.uX)(),(0,a.CE)("button",{key:0,class:"pi pi-lock lock-button",onClick:n=>o.lockDevice(e)},null,8,T)):(0,a.Q3)("",!0),(0,a.Lk)("div",{class:(0,E.C4)(["device-status",{online:1===n,offline:1!==n}])},(0,E.v_)(1===n?"online":"offline"),3)])])))),128))]))]),o.showToast?((0,a.uX)(),(0,a.CE)("div",{key:0,class:(0,E.C4)(["toast",o.toastType])},(0,E.v_)(o.toastMessage),3)):(0,a.Q3)("",!0)])}var P=t(144),R=t(2496);R.A.register();var $={name:"MainPage",setup(){const n=(0,P.KR)({}),e=(0,P.KR)(!0),t=(0,u.rd)();let o=null;const i=async()=>{const n=(0,d.xI)();try{await(0,d.CI)(n),v("退出登录成功","success"),t.push("/login")}catch(e){console.error("退出登录失败:",e),v("退出登录失败","error")}},s=n=>{console.log(`锁定设备: ${n}`);const e=(0,g.Sx)(),t=(0,m.C3)(e,"https://remotelocker-e2e68-default-rtdb.asia-southeast1.firebasedatabase.app"),o=(0,d.xI)(),a=o.currentUser;if(a){const e=(0,m.KR)(t,`${a.uid}/${n}`);(0,m.hZ)(e,0).then((()=>{console.log(`设备 ${n} 已锁定`),v(`设备 ${n} 已锁定`,"success")})).catch((e=>{console.error(`锁定设备 ${n} 失败:`,e),v(`锁定设备 ${n} 失败`,"error")}))}else console.error("用户未登录"),v("用户未登录","error")},r=(0,P.KR)(!1),c=(0,P.KR)(""),l=(0,P.KR)("success");(0,a.sV)((()=>{const t=(0,d.xI)(),a=t.currentUser;if(a){const t=(0,g.Sx)(),i=(0,m.C3)(t,"https://remotelocker-e2e68-default-rtdb.asia-southeast1.firebasedatabase.app");o=(0,m.KR)(i,a.uid),(0,m.Zy)(o,(t=>{const o=t.val();n.value=o||{},e.value=!1}))}else console.error("用户未登录"),e.value=!1})),(0,a.hi)((()=>{o&&(0,m.AU)(o)}));const v=(n,e="success")=>{c.value=n,l.value=e,r.value=!0,setTimeout((()=>{r.value=!1}),3e3)};return{devices:n,loading:e,logout:i,lockDevice:s,showToast:r,toastMessage:c,toastType:l}}};const M=(0,s.A)($,[["render",z],["__scopeId","data-v-00f6c29b"]]);var D=M;const G=[{path:"/login",component:w},{path:"/",component:D,meta:{requiresAuth:!0}}],S=(0,u.aE)({history:(0,u.Bt)(),routes:G}),U=document.createElement("div");U.innerHTML='\n  <div class="loading-overlay">\n    <div class="container">\n      <div class="cube"><div class="cube__inner"></div></div>\n      <div class="cube"><div class="cube__inner"></div></div>\n      <div class="cube"><div class="cube__inner"></div></div>\n    </div>\n  </div>\n  <style>\n    .loading-overlay {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(255, 255, 255, 0.8);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 9999;\n    }\n\n    .container {\n      --uib-size: 45px;\n      --uib-color: black;\n      --uib-speed: 1.75s;\n      display: flex;\n      align-items: flex-end;\n      justify-content: space-between;\n      width: var(--uib-size);\n      height: calc(var(--uib-size) * 0.6);\n    }\n    \n    .cube {\n      flex-shrink: 0;\n      width: calc(var(--uib-size) * 0.2);\n      height: calc(var(--uib-size) * 0.2);\n      animation: jump var(--uib-speed) ease-in-out infinite;\n    }\n    \n    .cube__inner {\n      display: block;\n      height: 100%;\n      width: 100%;\n      border-radius: 25%;\n      background-color: var(--uib-color);\n      transform-origin: center bottom;\n      animation: morph var(--uib-speed) ease-in-out infinite;\n      transition: background-color 0.3s ease;\n    }\n    \n    .cube:nth-child(2) {\n      animation-delay: calc(var(--uib-speed) * -0.36);\n    \n      .cube__inner {\n        animation-delay: calc(var(--uib-speed) * -0.36);\n      }\n    }\n    .cube:nth-child(3) {\n      animation-delay: calc(var(--uib-speed) * -0.2);\n    \n      .cube__inner {\n        animation-delay: calc(var(--uib-speed) * -0.2);\n      }\n    }\n    \n    @keyframes jump {\n      0% {\n        transform: translateY(0px);\n      }\n    \n      30% {\n        transform: translateY(0px);\n        animation-timing-function: ease-out;\n      }\n    \n      50% {\n        transform: translateY(-200%);\n        animation-timing-function: ease-in;\n      }\n    \n      75% {\n        transform: translateY(0px);\n        animation-timing-function: ease-in;\n      }\n    }\n    \n    @keyframes morph {\n      0% {\n        transform: scaleY(1);\n      }\n    \n      10% {\n        transform: scaleY(1);\n      }\n    \n      20%,\n      25% {\n        transform: scaleY(0.6) scaleX(1.3);\n        animation-timing-function: ease-in-out;\n      }\n    \n      30% {\n        transform: scaleY(1.15) scaleX(0.9);\n        animation-timing-function: ease-in-out;\n      }\n    \n      40% {\n        transform: scaleY(1);\n      }\n    \n      70%,\n      85%,\n      100% {\n        transform: scaleY(1);\n      }\n    \n      75% {\n        transform: scaleY(0.8) scaleX(1.2);\n      }\n    }\n  </style>\n',document.body.appendChild(U),S.beforeEach(((n,e,t)=>{const o=(0,d.xI)(),a=n.matched.some((n=>n.meta.requiresAuth));(0,d.hg)(o,(n=>{a&&!n?t("/login"):(document.body.contains(U)&&document.body.removeChild(U),t())}))}));var B=S;const F=(0,o.Ef)(l);F.use(B),F.mount("#app")}},e={};function t(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return n[o].call(i.exports,i,i.exports,t),i.exports}t.m=n,function(){var n=[];t.O=function(e,o,a,i){if(!o){var s=1/0;for(u=0;u<n.length;u++){o=n[u][0],a=n[u][1],i=n[u][2];for(var r=!0,c=0;c<o.length;c++)(!1&i||s>=i)&&Object.keys(t.O).every((function(n){return t.O[n](o[c])}))?o.splice(c--,1):(r=!1,i<s&&(s=i));if(r){n.splice(u--,1);var l=a();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=n.length;u>0&&n[u-1][2]>i;u--)n[u]=n[u-1];n[u]=[o,a,i]}}(),function(){t.n=function(n){var e=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(e,{a:e}),e}}(),function(){t.d=function(n,e){for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"===typeof window)return window}}()}(),function(){t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)}}(),function(){var n={524:0};t.O.j=function(e){return 0===n[e]};var e=function(e,o){var a,i,s=o[0],r=o[1],c=o[2],l=0;if(s.some((function(e){return 0!==n[e]}))){for(a in r)t.o(r,a)&&(t.m[a]=r[a]);if(c)var u=c(t)}for(e&&e(o);l<s.length;l++)i=s[l],t.o(n,i)&&n[i]&&n[i][0](),n[i]=0;return t.O(u)},o=self["webpackChunkremote_locker_platform"]=self["webpackChunkremote_locker_platform"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(293)}));o=t.O(o)})();
//# sourceMappingURL=app.9bcb99f3.js.map